<!--
  Generated template for the EditPagePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <header class="header_title">
    <div class="container">
      <div class="back_btn">
        <a (click)="back()"><i class="fa fa-arrow-left"></i></a>
      </div>
      <div class="page_title text-center">
        <h3>{{'edit-page-info' | translate}}</h3>
      </div>
      <!-- <div class="menu_btn text-right">
        <a href="#"><i class="fa fa-bars" style="color:#fff;font-size:18px"></i></a>
      </div> -->
    </div>
  </header>

</ion-header>


<ion-content padding>
  <section class="bg_grey full_vh pages">
    <div class="panel panel-theme">
      <ul class="nav nav-tabs flex-space-around">
        <li class="active"><a data-toggle="tab" href="#tab-content-11"> {{'general' | translate}}</a></li>
        <li><a (click)="getPageRoles(page.id)" data-toggle="tab" href="#tab-content-22"> {{'page-roles' | translate}}</a></li>
      </ul>
    </div>
    <div class="container">
      <div class="tab-content">
        <div id="tab-content-11" class="tab-pane fade in active">
          <form class="panel panel-theme">
            <div class="form-group">
              <label for="g_name">{{'page-title' | translate}}:</label>
              <input type="text" class="form-control" id="g_name" value="{{ page.title }}" [(ngModel)]="page.title" [ngModelOptions]="{ standalone :true}">
            </div>
            <div class="form-group">
              <label for="g_desc">{{'description' | translate}}:</label>
              <textarea rows="7" class="form-control" id="g_desc" value="{{ page.description }}" [(ngModel)]="page.description" [ngModelOptions]="{ standalone :true}"></textarea>
            </div>
            <div class="form-group">
              <label for="g_priv">{{'category' | translate}}:</label>
              <select class="form-control" id="g_priv" [(ngModel)]="category" [ngModelOptions]="{ standalone :true}">
    									<option *ngFor="let category of categories"  value="{{ category.id }}">{{ category.title | translate}}</option>
						        </select>
            </div>
            <div class="form-group mt-30 mb-30">
              <button (click)="editPage(page.title, page.description, category, page.id)" type="submit" class="btn btn-theme">{{'save' | translate}}</button>
              <button (click)="deletePage(page.id, this.userId)" type="submit" class="btn btn-theme">{{'delete' | translate}}</button>
            </div>
          </form>
        </div>
        <div id="tab-content-22" class="tab-pane fade">
          <form class="panel panel-theme">
            <div class="form-group" id="roles">
              <div class="user-item">
                <div class="pull-left">
                  <div class="user-img">
                    <a href="#"><img src="{{userAvatar}}" alt=""></a>
                  </div>
                  <div class="user-info pull-left">
                    <h3 class="mt-15"><a href="#">{{userName}}</a></h3>
                  </div>
                </div>
                <div class="pull-right pt-15">
                  <span class="label btn-theme">{{'admin' | translate}}</span>
                </div>
              </div>
              <div *ngFor="let role of roles let i = index;">
                <div class="user-item">
                  <div class="pull-left">
                    <div class="user-img">
                      <a href="#"><img src="{{ role.avatar }}" alt=""></a>
                    </div>
                    <div class="user-info pull-left">
                      <h3><a href="#">{{ role.first_name }} {{ role.last_name }}</a></h3>
                      <select [(ngModel)]="role.page_role" [ngModelOptions]="{standalone: true}">
    												<option value="1">{{'admin' | translate}}</option>
    												<option value="2">{{'moderator' | translate}}</option>
    												<option value="3">{{'editor' | translate}}</option>
									        </select>
                    </div>
                  </div>
                  <div class="pull-right pt-15">
                    <a (click)="removePageRole(role.role_user_id, role.role_page_id, i)" href="#" class="btn btn-danger btn-xs"><i class="fa fa-close"></i></a>
                  </div>
                </div>
              </div>
              <span></span>
            </div>
            <label>{{'add-role' | translate}}:</label>
            <div class="search-form user-item mt-20 pb-25">
              <div class="input-group">
                <input type="text" primary [(ngModel)]="searchQuery" [ngModelOptions]="{standalone: true}" (keyup)="searchUsers(searchQuery)" show-cancel="true" class="form-control" placeholder="{{'search-here' | translate}}">
                <div class="input-group-btn">
                  <!-- <button type="submit" class="btn btn-default">
											<i class="fa fa-search"></i>
										</button> -->
                </div>
              </div>
            </div>
            <div class="user-suggestion-list box" id="page-user-role-suggestion" *ngFor="let user of users; let i = index;">
              <div class="user-item">
                <div class="user-img">
                  <a (click)="addRole(user.first_name, user.last_name, user.avatar, user.id)" href="#"><img src="{{ user.avatar }}" alt=""></a>
                </div>
                <div class="user-info">
                  <h3 (click)="addRole(user.first_name, user.last_name, user.avatar, user.id)" class="mt-15"><a href="#">{{ user.name }}</a></h3>
                </div>
              </div>
            </div>
            <div class="form-group mt-30 mb-30">
              <button (click)="saveRoles(page.id, roles)" type="submit" class="btn btn-theme">{{'save' | translate}}</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
</ion-content>
